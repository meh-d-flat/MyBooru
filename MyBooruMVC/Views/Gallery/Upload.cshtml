@using Microsoft.Extensions.Configuration;
@inject IConfiguration config
@{
    ViewBag.Title = "Upload";
    Layout = "_Layout";
}

<body>
    <form action="@config["ApiHost"]/api/media/upload" method="post" enctype="multipart/form-data" id="file-form">
        <div style="padding-top: 1em">
            <label for="file">Upload File</label>
            <input name="file" type="file" id="file-input" />
        </div>
        <button type="submit" class="btn btn-primary">Upload</button>
    </form>
    <form action="@config["ApiHost"]/api/media/uploadfrom" method="get">
        <div style="margin-top: 10px">
            <label for="source">Url from web</label>
            <input name="source" type="text" />
        </div>
        <button type="submit" class="btn btn-primary">Upload</button>
    </form>
    <script>
        ////$(document).ready(function () {
        //    $("#file-input").on('change', function () {
        //        $("#file-form").submit();
        //    });

        //    $("window").on('paste', function (e) {
        //        $("#file-input").prop('files') = e.originalEvent.clipboardData.files;
        //    });
        ////});

        const form = document.getElementById("file-form");
        const fileInput = document.getElementById("file-input");

        fileInput.addEventListener('change', () => {
            form.submit();
        });

        window.addEventListener('paste', e => {
            fileInput.files = e.clipboardData.files;
        });
    </script>
</body>